(this["webpackJsonpc-portfolio-client"]=this["webpackJsonpc-portfolio-client"]||[]).push([[0],{55:function(e,t,a){e.exports=a(86)},60:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(20),o=a.n(c),l=(a(60),a(25)),u=a(6),s=a(7),i=a(17),m=a(10),d=a(14),b=a(23),f=a(11),p=a.n(f),E=a(21),h=a(24),v=a.n(h);v.a.defaults.baseURL="https://cportfolio.herokuapp.com";var j={setAuthHeader:function(e){return v.a.defaults.headers.common.Authorization="Bearer ".concat(e)},authenticateUser:function(){var e=Object(E.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("/users/authenticate",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getUser:function(){var e=Object(E.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/users/current",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getAllContent:function(){var e=Object(E.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/content/");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),createContent:function(){var e=Object(E.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("/content/create",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),editContent:function(){var e=Object(E.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.put("".concat("/content/").concat(t.id),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteContent:function(){var e=Object(E.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.delete("".concat("/content/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},O=Object(b.a)("user/authenticate",j.authenticateUser),g=Object(b.b)({name:"user",initialState:{isAuthenticated:!1,authType:"Bearer"},reducers:{setUser:function(e,t){return Object(m.a)(Object(m.a)(Object(m.a)({},e),t.payload.data),{},{token:localStorage.getItem("token"),isAuthenticated:!0})},logout:function(){return localStorage.removeItem("token"),j.setAuthHeader(""),{isAuthenticated:!1}}},extraReducers:Object(i.a)({},O.fulfilled,(function(e,t){return localStorage.removeItem("token"),localStorage.setItem("token",t.payload.data.token),j.setAuthHeader(t.payload.data.token),Object(m.a)(Object(m.a)(Object(m.a)({},e),t.payload.data),{},{isAuthenticated:!0})}))}),w=g.actions,N=w.logout,y=w.setUser,k=g.reducer;function C(){var e=Object(u.f)(),t=Object(s.b)(),a=Object(s.c)((function(e){return e.user.isAuthenticated})),c=Object(n.useState)({email:"",password:""}),o=Object(d.a)(c,2),l=o[0],b=o[1],f=function(e){return b(Object(m.a)(Object(m.a)({},l),{},Object(i.a)({},e.target.id,e.target.value)))};return Object(n.useEffect)((function(){a&&e.push("/dashboard")})),r.a.createElement("div",{className:"form-box"},r.a.createElement("form",{className:"login-form",onSubmit:function(e){e.preventDefault(),t(O(l))}},r.a.createElement("h2",null,"Login"),r.a.createElement("hr",null),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"email",id:"email",placeholder:"Email Address",value:l.email,onChange:f,className:"form-control"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",id:"password",placeholder:"Password",value:l.password,onChange:f,className:"form-control"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block btn-lg"},"Login"))))}var x=function(){return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row no-gutter"},r.a.createElement("div",{className:"col-6 bg-info d-flex justify-content-center"},r.a.createElement("div",{className:"splash-container"},r.a.createElement("h1",{className:"display-3 text-white"},"cPortfolio"))),r.a.createElement("div",{className:"col-6"},r.a.createElement("div",{className:"splash-container"},r.a.createElement(C,null)))))},S=a(27);function A(){var e=Object(s.b)();return r.a.createElement("nav",{className:"navbar navbar-dark fixed-top bg-dark flex-md-nowrap p-0 shadow"},r.a.createElement(S.a.Link,{as:l.b,to:"/dashboard",className:"navbar-brand col-sm-3 col-md-2 mr-0"},"Dashboard"),r.a.createElement("ul",{className:"navbar-nav px-3"},r.a.createElement("li",{className:"nav-item text-nowrap"},r.a.createElement(S.a.Link,{as:l.b,to:"/",onClick:function(){return e(N())}},"Sign out"))))}function H(e){var t=e.setView,a=Object(n.useState)("dashboard"),c=Object(d.a)(a,2),o=c[0],l=c[1];return r.a.createElement(S.a,{className:"col-md-2 d-none d-md-block bg-light sidebar",activeKey:o,onSelect:function(e){l(e),t(e)}},r.a.createElement("div",{className:"sidebar-sticky"},r.a.createElement("ul",{className:"nav flex-column"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(S.a.Link,{eventKey:"dashboard"},"Dashboard")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(S.a.Link,{eventKey:"add-content"},"Add Content")))))}var L=a(54),I=Object(b.a)("content/getContent",j.getAllContent),D=Object(b.a)("content/createContent",j.createContent),U=Object(b.a)("content/editContent",j.editContent),B=Object(b.a)("content/deleteContent",j.deleteContent),F=Object(b.b)({name:"content",initialState:[],reducers:{},extraReducers:Object(i.a)({"user/logout":function(){return[]}},I.fulfilled,(function(e,t){return Object(L.a)(t.payload.data)}))}).reducer,T=a(18),G=a(12);function R(e){var t=e.show,a=e.closeHandler,c=Object(n.useState)(e.content),o=Object(d.a)(c,2),l=o[0],u=o[1],b=Object(s.b)(),f=function(e){return u(Object(m.a)(Object(m.a)({},l),{},Object(i.a)({},e.target.id,e.target.value)))};return r.a.createElement(T.a,{size:"lg",show:t,onHide:a},r.a.createElement(T.a.Header,null,r.a.createElement(T.a.Title,null,"Edit Content")),r.a.createElement(T.a.Body,null,r.a.createElement(G.a,null,r.a.createElement(G.a.Group,{controlId:"title"},r.a.createElement(G.a.Label,null,"Title"),r.a.createElement(G.a.Control,{type:"text",value:l.title,onChange:f})),r.a.createElement(G.a.Group,{controlId:"description"},r.a.createElement(G.a.Label,null,"Description"),r.a.createElement(G.a.Control,{as:"textarea",rows:"5",value:l.description,onChange:f})))),r.a.createElement(T.a.Footer,null,r.a.createElement("button",{className:"btn btn-primary",onClick:a},"Cancel"),r.a.createElement("button",{className:"btn btn-warning",onClick:function(){b(U(l)).then((function(){return b(I())})).then((function(){return a()}))}},"Save changes")))}function V(e){var t=e.content,a=e.show,n=e.closeHandler,c=Object(s.b)();return r.a.createElement(T.a,{show:a,onHide:n},r.a.createElement(T.a.Header,null,r.a.createElement(T.a.Title,null,"Delete Content")),r.a.createElement(T.a.Body,null,"Are you sure you want to delete '",t.title,"'?"),r.a.createElement(T.a.Footer,null,r.a.createElement("button",{className:"btn btn-primary",onClick:n},"No, cancel"),r.a.createElement("button",{className:"btn btn-danger",onClick:function(){c(B(t.id)).then((function(){return c(I())})),n()}},"Yes, delete")))}function K(e){var t=e.content,a=Object(n.useState)(!1),c=Object(d.a)(a,2),o=c[0],l=c[1],u=Object(n.useState)(!1),s=Object(d.a)(u,2),i=s[0],m=s[1],b=t.title,f=t.description;return r.a.createElement(r.a.Fragment,null,r.a.createElement(R,{content:t,show:o,closeHandler:function(){return l(!1)}}),r.a.createElement(V,{content:t,show:i,closeHandler:function(){return m(!1)}}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"flex-fill card mt-5 ml-5 mr-5"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h4",{className:"card-title"},b),r.a.createElement("p",{className:"card-text"},f),r.a.createElement("button",{className:"btn btn-link float-right",onClick:function(){return l(!0)}},"Edit"),r.a.createElement("button",{className:"btn btn-link float-right text-danger",onClick:function(){return m(!0)}},"Delete")))))}function W(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.content}));return Object(n.useEffect)((function(){function t(){return(t=Object(E.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e(I());case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flex-wrap pt-3 pb-2 mb-3"},r.a.createElement("div",{className:"row"},r.a.createElement("h1",{className:"h2 ml-5 mt-5"},"Your Content")),t.map((function(e){return r.a.createElement(K,{content:e,key:e.id})}))))}var z=a(52);function J(e){var t=e.setView,a=Object(n.useState)({}),c=Object(d.a)(a,2),o=c[0],l=c[1],u=Object(s.b)(),b=function(e){return l(Object(m.a)(Object(m.a)({},o),{},Object(i.a)({},e.target.id,e.target.value)))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"h2 ml-5 mt-5"},"Add Content"),r.a.createElement(G.a,{className:"mt-5",onSubmit:function(e){e.preventDefault(),u(D(o)).then((function(){return u(I())})).then((function(){return t("dashboard")}))}},r.a.createElement(G.a.Group,{controlId:"title"},r.a.createElement(G.a.Label,null,"Title"),r.a.createElement(G.a.Control,{type:"text",value:o.title,onChange:b})),r.a.createElement(G.a.Group,{controlId:"description"},r.a.createElement(G.a.Label,null,"Dscription"),r.a.createElement(G.a.Control,{as:"textarea",rows:"5",value:o.description,onChange:b})),r.a.createElement(z.a,{type:"submit",variant:"info"},"Create")))}function M(){var e=Object(u.f)(),t=Object(n.useState)("dashboard"),a=Object(d.a)(t,2),c=a[0],o=a[1],l=Object(s.c)((function(e){return e.user.isAuthenticated}));Object(n.useEffect)((function(){l||e.push("/")}));var i=function(e){return o(e)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(A,null),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement(H,{setView:i}),r.a.createElement("main",{role:"main",className:"col-md-9 ml-sm-auto col-lg-10 px-4"},"dashboard"===c&&r.a.createElement(W,null),"add-content"===c&&r.a.createElement(J,{setView:i})))))}a(85);var P=function(){var e=Object(s.b)();return Object(n.useEffect)((function(){var t=localStorage.getItem("token");null!==t&&(j.setAuthHeader(t),j.getUser().then((function(t){return e(y(t))})).catch((function(e){return console.log(e)})))})),r.a.createElement(l.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(u.c,null,r.a.createElement(u.a,{exact:!0,path:"/",component:x}),r.a.createElement(u.a,{exact:!0,path:"/dashboard",component:M}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Y=a(9),$=a(30),q=a(53),Q=Object(Y.combineReducers)({content:F,user:k}),X=[$.a],Z=[Y.applyMiddleware.apply(void 0,X)],_=q.composeWithDevTools.apply(void 0,Z),ee=Object(Y.createStore)(Q,{},_);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(s.a,{store:ee},r.a.createElement(P,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[55,1,2]]]);
//# sourceMappingURL=main.3ae7fb1c.chunk.js.map