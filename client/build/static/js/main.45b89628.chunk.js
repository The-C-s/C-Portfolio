(this["webpackJsonpc-portfolio-client"]=this["webpackJsonpc-portfolio-client"]||[]).push([[0],{56:function(e,t,a){e.exports=a(88)},61:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),o=a.n(c),l=(a(61),a(23)),u=a(7),i=a(6),s=a(10),m=a(28),d=a(53),p=a(8),b=a(66),f={},E={},h=a(40),v=a(21),j=a.n(v),O=[],y=a(20),g=a(41),w=a(12),N=a.n(w),k=a(25);j.a.defaults.baseURL="https://cportfolio.herokuapp.com";var C={setAuthHeader:function(e,t){return j.a.defaults.headers.common.Authorization="".concat(e," ").concat(t)},authenticateUser:function(){var e=Object(k.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.post("/users/authenticate",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getAllContent:function(){var e=Object(k.a)(N.a.mark((function e(t,a){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("/content/",{headers:{Authorization:"".concat(t," ").concat(a)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),createContent:function(){var e=Object(k.a)(N.a.mark((function e(t,a,n){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.post("/content/create",t,{headers:{Authorization:"".concat(a," ").concat(n)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),editContent:function(){var e=Object(k.a)(N.a.mark((function e(t,a,n,r){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.put("".concat("/content/").concat(t),a,{headers:{Authorization:"".concat(n," ").concat(r)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),deleteContent:function(){var e=Object(k.a)(N.a.mark((function e(t,a,n){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.delete("".concat("/content/").concat(t),{headers:{Authorization:"".concat(a," ").concat(n)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()},x=Object(g.a)("user/authenticate",(function(e){return C.authenticateUser(e)})),T=Object(g.b)({name:"user",initialState:{isAuthenticated:!1,authType:"Bearer"},reducers:{logout:function(e,t){return localStorage.removeItem("token"),{isAuthenticated:!1}}},extraReducers:Object(y.a)({},x.fulfilled,(function(e,t){return localStorage.setItem("token",t.payload.data.token),C.setAuthHeader(e.authType,t.payload.data.token),Object(p.a)(Object(p.a)(Object(p.a)({},e),t.payload.data),{},{isAuthenticated:!0})}))}),A=T.actions.logout,S=T.reducer,D=Object(s.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return Object(p.a)(Object(p.a)({},t.payload),{},{isAuthenticated:!b(t.payload.token),authType:"Bearer"});default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return Object(p.a)(Object(p.a)({},e),{},{errors:t.payload});default:return e}},content:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH":return Object(h.a)(t.payload);case"DELETE":return e.filter((function(e){return e.id!==t.payload}));case"EDIT":return e.map((function(e){return e.id===t.payload.id?t.payload:e}));case"CREATE":return[].concat(Object(h.a)(e),[t.payload]);default:return e}},user:S}),L=[m.a],H=[s.applyMiddleware.apply(void 0,L)],R=d.composeWithDevTools.apply(void 0,H),I=Object(s.createStore)(D,{},R),F=a(14);function z(){var e=Object(u.f)(),t=Object(i.b)(),a=Object(i.c)((function(e){return e.user.isAuthenticated})),c=Object(n.useState)({email:"",password:""}),o=Object(F.a)(c,2),l=o[0],s=o[1],m=function(e){return s(Object(p.a)(Object(p.a)({},l),{},Object(y.a)({},e.target.id,e.target.value)))};return Object(n.useEffect)((function(){a&&e.push("/dashboard")})),r.a.createElement("div",{className:"form-box"},r.a.createElement("form",{className:"login-form",onSubmit:function(e){e.preventDefault(),t(x(l))}},r.a.createElement("h2",null,"Login"),r.a.createElement("hr",null),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"email",id:"email",placeholder:"Email Address",value:l.email,onChange:m,className:"form-control"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",id:"password",placeholder:"Password",value:l.password,onChange:m,className:"form-control"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block btn-lg"},"Login"))))}var B=function(){return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row no-gutter"},r.a.createElement("div",{className:"col-6 bg-info d-flex justify-content-center"},r.a.createElement("div",{className:"splash-container"},r.a.createElement("h1",{className:"display-3 text-white"},"cPortfolio"))),r.a.createElement("div",{className:"col-6"},r.a.createElement("div",{className:"splash-container"},r.a.createElement(z,null)))))},G=a(26);function U(){var e=Object(i.b)();return r.a.createElement("nav",{className:"navbar navbar-dark fixed-top bg-dark flex-md-nowrap p-0 shadow"},r.a.createElement(G.a.Link,{as:l.b,to:"/dashboard",className:"navbar-brand col-sm-3 col-md-2 mr-0"},"Dashboard"),r.a.createElement("ul",{className:"navbar-nav px-3"},r.a.createElement("li",{className:"nav-item text-nowrap"},r.a.createElement(G.a.Link,{as:l.b,to:"/",onClick:function(){return e(A())}},"Sign out"))))}function V(e){var t=e.setView,a=Object(n.useState)("dashboard"),c=Object(F.a)(a,2),o=c[0],l=c[1];return r.a.createElement(G.a,{className:"col-md-2 d-none d-md-block bg-light sidebar",activeKey:o,onSelect:function(e){l(e),t(e)}},r.a.createElement("div",{className:"sidebar-sticky"},r.a.createElement("ul",{className:"nav flex-column"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(G.a.Link,{eventKey:"dashboard"},"Dashboard")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(G.a.Link,{eventKey:"add-content"},"Add Content")))))}var K=a(55),W=a(17),_=a(11);function J(e){var t=Object(n.useState)(e.content),a=Object(F.a)(t,2),c=a[0],o=a[1],l=Object(i.c)((function(e){return e.user})),u=l.authType,s=l.token,m=Object(i.b)(),d=e.show,b=e.closeHandler,f=function(e){return o(Object(p.a)(Object(p.a)({},c),{},Object(y.a)({},e.target.id,e.target.value)))};return r.a.createElement(W.a,{size:"lg",show:d,onHide:b},r.a.createElement(W.a.Header,null,r.a.createElement(W.a.Title,null,"Edit Content")),r.a.createElement(W.a.Body,null,r.a.createElement(_.a,null,r.a.createElement(_.a.Group,{controlId:"title"},r.a.createElement(_.a.Label,null,"Title"),r.a.createElement(_.a.Control,{type:"text",value:c.title,onChange:f})),r.a.createElement(_.a.Group,{controlId:"description"},r.a.createElement(_.a.Label,null,"Description"),r.a.createElement(_.a.Control,{as:"textarea",rows:"5",value:c.description,onChange:f})))),r.a.createElement(W.a.Footer,null,r.a.createElement("button",{className:"btn btn-primary",onClick:b},"Cancel"),r.a.createElement("button",{className:"btn btn-warning",onClick:function(){var e=c.id,t=Object(K.a)(c,["id"]);C.editContent(e,t,u,s).then((function(t){return m({type:"EDIT",payload:Object(p.a)({id:e},t.data)})})).catch((function(e){return console.log(e)})),b()}},"Save changes")))}function M(e){var t=e.content,a=e.show,n=e.closeHandler,c=Object(i.b)(),o=Object(i.c)((function(e){return e.user})),l=o.authType,u=o.token;return r.a.createElement(W.a,{show:a,onHide:n},r.a.createElement(W.a.Header,null,r.a.createElement(W.a.Title,null,"Delete Content")),r.a.createElement(W.a.Body,null,"Are you sure you want to delete '",t.title,"'?"),r.a.createElement(W.a.Footer,null,r.a.createElement("button",{className:"btn btn-primary",onClick:n},"No, cancel"),r.a.createElement("button",{className:"btn btn-danger",onClick:function(){C.deleteContent(t.id,l,u).then(c({type:"DELETE",payload:t.id})).catch((function(e){return console.log(e)})),n()}},"Yes, delete")))}function P(e){var t=e.content,a=Object(n.useState)(!1),c=Object(F.a)(a,2),o=c[0],l=c[1],u=Object(n.useState)(!1),i=Object(F.a)(u,2),s=i[0],m=i[1],d=t.title,p=t.description;return r.a.createElement(r.a.Fragment,null,r.a.createElement(J,{content:t,show:o,closeHandler:function(){return l(!1)}}),r.a.createElement(M,{content:t,show:s,closeHandler:function(){return m(!1)}}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"flex-fill card mt-5 ml-5 mr-5"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h4",{className:"card-title"},d),r.a.createElement("p",{className:"card-text"},p),r.a.createElement("button",{className:"btn btn-link float-right",onClick:function(){return l(!0)}},"Edit"),r.a.createElement("button",{className:"btn btn-link float-right text-danger",onClick:function(){return m(!0)}},"Delete")))))}function Y(){var e=Object(i.c)((function(e){return e.content})),t=Object(i.c)((function(e){return e.user.authType})),a=Object(i.b)(),c=localStorage.getItem("token");return Object(n.useEffect)((function(){function e(){return(e=Object(k.a)(N.a.mark((function e(){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.getAllContent(t,c);case 3:n=e.sent,a({type:"FETCH",payload:n.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flex-wrap pt-3 pb-2 mb-3"},r.a.createElement("div",{className:"row"},r.a.createElement("h1",{className:"h2 ml-5 mt-5"},"Your Content")),e.map((function(e){return r.a.createElement(P,{content:e,key:e.id})}))))}var $=a(54);function q(e){var t=e.setView,a=Object(n.useState)({}),c=Object(F.a)(a,2),o=c[0],l=c[1],u=Object(i.c)((function(e){return e.user})),s=u.email,m=u.authType,d=u.token,b=Object(i.b)(),f=function(e){return l(Object(p.a)(Object(p.a)({},o),{},Object(y.a)({},e.target.id,e.target.value)))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"h2 ml-5 mt-5"},"Add Content"),r.a.createElement(_.a,{className:"mt-5",onSubmit:function(e){e.preventDefault();var a={user:s,title:o.title,description:o.description};C.createContent(a,m,d).then((function(e){b({type:"CREATE",payload:e.data}),t("dashboard")})).catch((function(e){return console.log(e)}))}},r.a.createElement(_.a.Group,{controlId:"title"},r.a.createElement(_.a.Label,null,"Title"),r.a.createElement(_.a.Control,{type:"text",value:o.title,onChange:f})),r.a.createElement(_.a.Group,{controlId:"description"},r.a.createElement(_.a.Label,null,"Dscription"),r.a.createElement(_.a.Control,{as:"textarea",rows:"5",value:o.description,onChange:f})),r.a.createElement($.a,{type:"submit",variant:"info"},"Create")))}function Q(){var e=Object(u.f)(),t=Object(n.useState)("dashboard"),a=Object(F.a)(t,2),c=a[0],o=a[1],l=Object(i.c)((function(e){return e.user.isAuthenticated}));Object(n.useEffect)((function(){l||e.push("/")}));var s=function(e){return o(e)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(U,null),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement(V,{setView:s}),r.a.createElement("main",{role:"main",className:"col-md-9 ml-sm-auto col-lg-10 px-4"},"dashboard"===c&&r.a.createElement(Y,null),"add-content"===c&&r.a.createElement(q,{setView:s})))))}a(87);var X=function(){return r.a.createElement(i.a,{store:I},r.a.createElement(l.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(u.c,null,r.a.createElement(u.a,{exact:!0,path:"/",component:B}),r.a.createElement(u.a,{exact:!0,path:"/dashboard",component:Q})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(X,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[56,1,2]]]);
//# sourceMappingURL=main.45b89628.chunk.js.map